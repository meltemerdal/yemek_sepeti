<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yemeksepeti - Yemek Sipari≈üi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }
        
        /* Header Styles - Yemeksepeti Design */
        header {
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-container {
            max-width: 1440px;
            margin: 0 auto;
            padding: 12px 24px;
            display: flex;
            flex-direction: column;
            gap: 0;
        }
        
        .header-top {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 46px;
            position: relative;
        }
        
        .header-left {
            position: absolute;
            left: 24px;
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .logo {
            cursor: pointer;
        }
        
        .header-right {
            position: absolute;
            right: 24px;
        }
        
        .logo-text {
            font-size: 22px;
            font-weight: 700;
            color: #ff2d55;
            letter-spacing: -0.5px;
        }
        
        .address-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 10px 16px;
            border-radius: 6px;
            background-color: #f8f9fa;
            cursor: pointer;
            transition: background-color 0.2s;
            margin: 0 auto;
        }
        
        .address-section:hover {
            background-color: #f0f1f3;
        }
        
        .location-icon {
            flex-shrink: 0;
        }
        
        .address-text {
            font-size: 15px;
            color: #697488;
            max-width: 500px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* Navigation Menu */
        .nav-menu {
            display: flex;
            gap: 32px;
            align-items: center;
            padding-top: 8px;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 0;
            color: #697488;
            text-decoration: none;
            font-size: 15px;
            font-weight: 500;
            position: relative;
            transition: color 0.2s;
        }
        
        .nav-item:hover {
            color: #ff2d55;
        }
        
        .nav-item.active {
            color: #ff2d55;
        }
        
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 0;
            right: 0;
            height: 3px;
            background-color: #ff2d55;
            border-radius: 2px 2px 0 0;
        }
        
        .nav-item svg {
            width: 24px;
            height: 24px;
        }
        
        /* Header Right Section */
        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .user-menu {
            position: relative;
        }
        
        .user-menu-button {
            display: flex;
            align-items: center;
            gap: 8px;
            background: transparent;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .user-menu-button:hover {
            background-color: #f8f9fa;
        }
        
        .user-name {
            font-size: 14px;
            font-weight: 500;
            color: #1d1d1f;
        }
        
        .user-icon-svg {
            flex-shrink: 0;
        }
        
        .dropdown-arrow {
            flex-shrink: 0;
            transition: transform 0.3s;
        }
        
        .user-menu.active .dropdown-arrow {
            transform: rotate(180deg);
        }
        
        .user-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
            min-width: 220px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s;
            z-index: 1000;
        }
        
        .user-menu.active .user-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .user-dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: #333;
            text-decoration: none;
            transition: background 0.2s;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            font-size: 14px;
        }
        
        .user-dropdown-item:first-child {
            border-radius: 12px 12px 0 0;
        }
        
        .user-dropdown-item:last-child {
            border-radius: 0 0 12px 12px;
            border-bottom: none;
        }
        
        .user-dropdown-item:hover {
            background: #f8f9fa;
        }
        
        .dropdown-item-icon {
            font-size: 18px;
        }
        
        .icon-button {
            position: relative;
            background: transparent;
            border: none;
            padding: 8px;
            cursor: pointer;
            border-radius: 6px;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .icon-button:hover {
            background-color: #f8f9fa;
        }
        
        .icon-button svg {
            display: block;
        }
        
        /* Address Modal Styles */
        .address-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .address-modal.active {
            display: flex;
        }
        
        .address-modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s;
        }
        
        .address-modal-content {
            position: relative;
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            animation: slideUp 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
        
        .address-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .address-modal-header h2 {
            font-size: 20px;
            font-weight: 600;
            color: #1d1d1f;
            margin: 0;
        }
        
        .address-modal-close {
            background: transparent;
            border: none;
            font-size: 24px;
            color: #697488;
            cursor: pointer;
            padding: 4px 8px;
            transition: color 0.2s;
        }
        
        .address-modal-close:hover {
            color: #1d1d1f;
        }
        
        .address-modal-body {
            padding: 24px;
            max-height: calc(80vh - 80px);
            overflow-y: auto;
        }
        
        .address-search {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: border-color 0.2s;
        }
        
        .address-search:focus-within {
            border-color: #ff2d55;
        }
        
        .address-search svg {
            flex-shrink: 0;
        }
        
        .address-search input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 15px;
            color: #1d1d1f;
        }
        
        .address-search input::placeholder {
            color: #999;
        }
        
        .address-suggestions {
            margin-top: 20px;
        }
        
        .address-suggestion-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .address-suggestion-item:hover {
            background-color: #f8f9fa;
        }
        
        .address-suggestion-item svg {
            flex-shrink: 0;
        }
        
        .suggestion-title {
            font-size: 15px;
            font-weight: 500;
            color: #1d1d1f;
            margin-bottom: 2px;
        }
        
        .suggestion-subtitle {
            font-size: 13px;
            color: #697488;
        }
        
        /* Cart Styles */
        .cart-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #d71f4b;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(215,31,75,0.4);
            z-index: 999;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .cart-toggle.active {
            display: flex;
        }
        
        .cart-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(215,31,75,0.6);
        }
        
        .cart-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #ff2d55;
            color: white;
            min-width: 18px;
            height: 18px;
            border-radius: 50%;
            font-size: 11px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
        }
        
        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            display: none;
            transition: opacity 0.3s;
        }
        
        .cart-overlay.active {
            display: block;
        }
        
        .cart {
            position: fixed;
            top: 0;
            right: -450px;
            width: 450px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 10px rgba(0,0,0,0.2);
            z-index: 1001;
            display: flex;
            flex-direction: column;
            transition: right 0.3s ease;
        }
        
        .cart.active {
            right: 0;
        }
        
        .cart-header {
            padding: 20px;
            background: #f8f8f8;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cart-title {
            font-size: 20px;
            font-weight: bold;
            color: #1a1a1a;
        }
        
        .cart-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s;
        }
        
        .cart-close:hover {
            background: #e0e0e0;
            color: #333;
        }
        
        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .cart-empty {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        
        .cart-empty-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }
        
        .cart-item {
            display: flex;
            gap: 12px;
            padding: 16px;
            background: #f8f8f8;
            border-radius: 8px;
            margin-bottom: 12px;
        }
        
        .cart-item-info {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 600;
            margin-bottom: 8px;
            color: #1a1a1a;
        }
        
        .cart-item-price {
            color: #d71f4b;
            font-weight: bold;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
        }
        
        .cart-item-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .cart-item-btn:hover {
            border-color: #d71f4b;
            color: #d71f4b;
        }
        
        .cart-item-remove {
            color: #999;
            cursor: pointer;
            font-size: 20px;
            padding: 4px;
        }
        
        .cart-item-remove:hover {
            color: #d71f4b;
        }
        
        .cart-footer {
            padding: 20px;
            background: #f8f8f8;
            border-top: 1px solid #e0e0e0;
        }
        
        .cart-summary {
            margin-bottom: 16px;
        }
        
        .cart-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 20px;
            font-weight: bold;
            padding-top: 12px;
            border-top: 2px solid #e0e0e0;
            margin-top: 12px;
        }
        
        .cart-checkout {
            width: 100%;
            padding: 16px;
            background: #d71f4b;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .cart-checkout:hover {
            background: #b91840;
        }
        
        .cart-checkout:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .min-order-warning {
            background: #fff3cd;
            color: #856404;
            padding: 12px;
            border-radius: 6px;
            font-size: 13px;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Main Content Layout */
        main {
            background-color: #f5f5f5;
            min-height: calc(100vh - 140px);
        }
        
        .main-content {
            max-width: 1440px;
            margin: 0 auto;
            padding: 24px;
            display: flex;
            gap: 24px;
            align-items: flex-start;
        }
        
        /* Sol Filtre Sidebar */
        .filters-sidebar {
            width: 320px;
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            position: sticky;
            top: 94px;
            max-height: calc(100vh - 118px);
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        .filters-sidebar::-webkit-scrollbar {
            width: 12px;
        }
        
        .filters-sidebar::-webkit-scrollbar-track {
            background: #e8e8e8;
            border-radius: 0;
        }
        
        .filters-sidebar::-webkit-scrollbar-thumb {
            background: #b0b0b0;
            border-radius: 0;
        }
        
        .filters-sidebar::-webkit-scrollbar-thumb:hover {
            background: #909090;
        }
        
        .filters-sidebar::-webkit-scrollbar-button {
            background: #d0d0d0;
            height: 16px;
        }
        
        .filters-sidebar::-webkit-scrollbar-button:vertical:start:decrement {
            background: #d0d0d0;
        }
        
        .filters-sidebar::-webkit-scrollbar-button:vertical:end:increment {
            background: #d0d0d0;
        }
        
        .filters-title {
            font-size: 20px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 24px;
        }
        
        .filter-section {
            margin-bottom: 24px;
            padding-bottom: 24px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .filter-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .filter-section-title {
            font-size: 14px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 16px;
        }
        
        .filter-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            cursor: pointer;
        }
        
        .filter-option input[type="radio"],
        .filter-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .filter-option label {
            font-size: 14px;
            color: #333;
            cursor: pointer;
            flex: 1;
        }
        
        .filter-button {
            width: 100%;
            padding: 14px;
            background-color: #ffd900;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            color: #1d1d1f;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .filter-button:hover {
            background-color: #f5cc00;
        }
        
        /* Saƒü ƒ∞√ßerik Alanƒ± */
        .content-area {
            flex: 1;
            min-width: 0;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 24px;
        }
        
        /* Restoran Kartlarƒ± */
        .restaurant-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .restaurant-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .restaurant-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .restaurant-image {
            width: 100%;
            height: 200px;
            position: relative;
            overflow: hidden;
            background-color: #f0f0f0;
        }
        
        .restaurant-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .favorite-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        
        .favorite-btn:hover {
            transform: scale(1.1);
            background: white;
        }
        
        .favorite-btn svg {
            width: 20px;
            height: 20px;
            transition: all 0.3s;
        }
        
        .favorite-btn.active svg {
            fill: #ff2d55;
        }
        
        .favorite-btn:not(.active) svg {
            fill: none;
            stroke: #ff2d55;
            stroke-width: 2;
        }
        
        .restaurant-card:hover .restaurant-image img {
            transform: scale(1.1);
        }
        
        .restaurant-image::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(to top, rgba(0,0,0,0.4) 0%, transparent 100%);
        }
        
        .restaurant-info {
            padding: 20px;
        }
        
        .restaurant-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .restaurant-category {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .restaurant-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        
        .rating {
            color: #ffd900;
            font-weight: bold;
        }
        
        .delivery-time {
            color: #666;
            font-size: 14px;
        }
        
        .min-order {
            color: #d71f4b;
            font-weight: bold;
        }
        
        /* Footer */
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 50px;
        }
        
        /* Loading */
        .loading {
            text-align: center;
            padding: 50px;
            font-size: 18px;
            color: #666;
        }
        
        .error {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        /* Chat Support Styles */
        .chat-button {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #d71f4b 0%, #ff2d55 100%);
            border-radius: 50%;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(215, 31, 75, 0.4);
            z-index: 998;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .chat-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(215, 31, 75, 0.6);
        }

        .chat-button svg {
            width: 28px;
            height: 28px;
            fill: white;
        }

        .chat-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff6b35;
            color: white;
            min-width: 22px;
            height: 22px;
            border-radius: 50%;
            font-size: 12px;
            font-weight: 700;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 0 6px;
            border: 2px solid white;
        }

        .chat-badge.active {
            display: flex;
        }

        .chat-container {
            position: fixed;
            bottom: 100px;
            left: 30px;
            width: 380px;
            height: 550px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            z-index: 999;
            display: none;
            flex-direction: column;
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }

        .chat-container.active {
            display: flex;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chat-header {
            background: linear-gradient(135deg, #d71f4b 0%, #ff2d55 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chat-avatar {
            width: 45px;
            height: 45px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .chat-header-text h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .chat-status {
            font-size: 12px;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #4ade80;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }

        .chat-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 3px;
        }

        .message {
            display: flex;
            gap: 10px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: #d71f4b;
            color: white;
        }

        .message-content {
            max-width: 70%;
        }

        .message-bubble {
            background: white;
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 14px;
            line-height: 1.5;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .message.user .message-bubble {
            background: #d71f4b;
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.support .message-bubble {
            border-bottom-left-radius: 4px;
        }

        .message-time {
            font-size: 11px;
            color: #94a3b8;
            margin-top: 4px;
            padding: 0 4px;
        }

        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .quick-reply {
            background: white;
            border: 1px solid #e2e8f0;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-reply:hover {
            background: #f8f9fa;
            border-color: #d71f4b;
            color: #d71f4b;
        }

        .chat-input-container {
            padding: 16px;
            background: white;
            border-top: 1px solid #e2e8f0;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            border: 1px solid #e2e8f0;
            border-radius: 24px;
            padding: 12px 18px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.2s;
        }

        .chat-input:focus {
            border-color: #d71f4b;
        }

        .chat-send {
            background: #d71f4b;
            border: none;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .chat-send:hover {
            background: #c01a42;
            transform: scale(1.05);
        }

        .chat-send:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: scale(1);
        }

        .chat-send svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        .typing-indicator {
            display: none;
            gap: 10px;
            padding: 12px 16px;
            background: white;
            border-radius: 16px;
            width: fit-content;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .typing-indicator.active {
            display: flex;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #94a3b8;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        @media (max-width: 768px) {
            .chat-container {
                left: 50%;
                transform: translateX(-50%);
                width: calc(100% - 20px);
                max-width: 400px;
                bottom: 90px;
            }

            .chat-button {
                left: 50%;
                transform: translateX(-50%);
                bottom: 20px;
            }

            .chat-button:hover {
                transform: translateX(-50%) scale(1.1);
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="header-top">
                <div class="header-left">
                    <div class="logo">
                        <span class="logo-text">Yemeksepeti</span>
                    </div>
                </div>
                
                <div class="address-section" onclick="openAddressModal()">
                    <svg class="location-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="#697488"/>
                    </svg>
                    <span class="address-text" id="selectedAddress">Adres se√ßin veya girin</span>
                </div>
                
                <div class="header-right">
                    <div class="user-menu" id="userMenu">
                    <button class="user-menu-button" onclick="toggleUserMenu(event)">
                        <svg class="user-icon-svg" width="20" height="20" viewBox="0 0 24 24" fill="#697488">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                        <span id="userName" class="user-name">Kullanƒ±cƒ±</span>
                        <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 24 24" fill="#697488">
                            <path d="M7 10l5 5 5-5z"/>
                        </svg>
                    </button>
                    <div class="user-dropdown">
                        <div class="user-dropdown-item" onclick="navigateTo('/customer/pages/wallet.php')">
                            <span class="dropdown-item-icon">üìÅ</span>
                            <span>C√ºzdan</span>
                        </div>
                        <div class="user-dropdown-item" onclick="navigateTo('/customer/pages/orders.php')">
                            <span class="dropdown-item-icon">üìã</span>
                            <span>√ñnceki Sipari≈ülerim</span>
                        </div>
                        <div class="user-dropdown-item" onclick="navigateTo('/customer/pages/profile.php')">
                            <span class="dropdown-item-icon">üë§</span>
                            <span>Hesabƒ±m</span>
                        </div>
                        <div class="user-dropdown-item" onclick="navigateTo('/customer/pages/coupons.php')">
                            <span class="dropdown-item-icon">üéüÔ∏è</span>
                            <span>Kuponlarƒ±m</span>
                        </div>
                        <div class="user-dropdown-item" onclick="navigateTo('/customer/pages/help.php')">
                            <span class="dropdown-item-icon">‚ùì</span>
                            <span>Yardƒ±m Merkezi</span>
                        </div>
                        <div class="user-dropdown-item" onclick="logout()">
                            <span class="dropdown-item-icon">üö™</span>
                            <span>√áƒ±kƒ±≈ü yap</span>
                        </div>
                    </div>
                </div>
                
                <button class="icon-button">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#697488">
                        <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/>
                    </svg>
                </button>
                
                <button class="icon-button" onclick="window.location.href='/customer/pages/favorites.php'" title="Favorilerim">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#697488">
                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                </button>
                
                <button class="icon-button" style="position: relative;" onclick="toggleCart()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#697488">
                        <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                    </svg>
                    <span class="cart-badge" id="headerCartBadge" style="display: none;">0</span>
                </button>
            </div>
            </div>
            
            <nav class="nav-menu">
                <a href="index.html" class="nav-item active">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
                    </svg>
                    <span>Restoran</span>
                </a>
                <a href="#" class="nav-item">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                    </svg>
                    <span>Mahalle</span>
                </a>
                <a href="#" class="nav-item">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                    </svg>
                    <span>Gel Al</span>
                </a>
            </nav>
        </div>
    </header>

    <!-- Ana ƒ∞√ßerik -->
    <main>
        <div class="main-content">
            <!-- Sol Filtre Sidebar -->
            <aside class="filters-sidebar">
                <h3 class="filters-title">Filtrele</h3>
                
                <!-- Sƒ±ralama -->
                <div class="filter-section">
                    <div class="filter-section-title">Sƒ±ralama</div>
                    <div class="filter-option">
                        <input type="radio" id="sort-default" name="sort" value="" checked onchange="loadRestaurants()">
                        <label for="sort-default">√ñnerilen (Varsayƒ±lan)</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="sort-delivery" name="sort" value="delivery" onchange="loadRestaurants()">
                        <label for="sort-delivery">Teslimat S√ºresi</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="sort-distance" name="sort" value="distance" onchange="loadRestaurants()">
                        <label for="sort-distance">Mesafe</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="sort-minorder" name="sort" value="minorder">
                        <label for="sort-minorder">Restoran Puanƒ±</label>
                    </div>
                </div>
                
                <!-- Mutfak -->
                <div class="filter-section">
                    <div class="filter-section-title">Mutfak</div>
                    <div id="kitchenCategories"></div>
                </div>
                
                
                
                <!-- Minimum Puan -->
                <div class="filter-section">
                    <div class="filter-section-title">Minimum Puan</div>
                    <div class="filter-option">
                        <input type="radio" id="rating-all" name="rating" value="0" checked onchange="loadRestaurants()">
                        <label for="rating-all">T√ºm√º</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="rating-4" name="rating" value="4" onchange="loadRestaurants()">
                        <label for="rating-4">4.0+</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="rating-45" name="rating" value="4.5" onchange="loadRestaurants()">
                        <label for="rating-45">4.5+</label>
                    </div>
                </div>
                
                
            </aside>
            
            <!-- Saƒü ƒ∞√ßerik Alanƒ± -->
            <div class="content-area">
                <h2 class="section-title">Restoranlarƒ± Ke≈üfet</h2>
                
                <!-- Restoran Listesi -->
                <div id="restaurantList" class="restaurant-grid">
                    <div class="loading">Restoranlar y√ºkleniyor...</div>
                </div>
            </div>
        </div>
    </main>

    <!-- Address Modal -->
    <div id="addressModal" class="address-modal">
        <div class="address-modal-overlay" onclick="closeAddressModal()"></div>
        <div class="address-modal-content">
            <div class="address-modal-header">
                <h2>Adres Se√ßin</h2>
                <button class="address-modal-close" onclick="closeAddressModal()">‚úï</button>
            </div>
            <div class="address-modal-body">
                <div class="address-search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#697488">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                    </svg>
                    <input 
                        type="text" 
                        id="addressInput" 
                        placeholder="Adres, mahalle veya sokak adƒ± girin"
                        onkeyup="handleAddressSearch(event)"
                    >
                    <button id="clearAddressInput" style="margin-left:5px; background:none; border:none; font-size:18px; cursor:pointer; color:#ff2d55;" title="Temizle" onclick="clearAddressInput(event)">‚úï</button>
                </div>
                <div class="address-suggestions" id="addressSuggestions">
                    <!-- √ñrnek adresler -->
                    <div class="address-suggestion-item" onclick="selectAddress('Kadƒ±k√∂y, ƒ∞stanbul')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#697488">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                        <div>
                            <div class="suggestion-title">Kadƒ±k√∂y</div>
                            <div class="suggestion-subtitle">ƒ∞stanbul</div>
                        </div>
                    </div>
                    <div class="address-suggestion-item" onclick="selectAddress('Be≈üikta≈ü, ƒ∞stanbul')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#697488">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                        <div>
                            <div class="suggestion-title">Be≈üikta≈ü</div>
                            <div class="suggestion-subtitle">ƒ∞stanbul</div>
                        </div>
                    </div>
                    <div class="address-suggestion-item" onclick="selectAddress('≈ûi≈üli, ƒ∞stanbul')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#697488">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                        <div>
                            <div class="suggestion-title">≈ûi≈üli</div>
                            <div class="suggestion-subtitle">ƒ∞stanbul</div>
                        </div>
                    </div>
                    <div class="address-suggestion-item" onclick="selectAddress('Beyoƒülu, ƒ∞stanbul')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#697488">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                        <div>
                            <div class="suggestion-title">Beyoƒülu</div>
                            <div class="suggestion-subtitle">ƒ∞stanbul</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Overlay -->
    <div id="cartOverlay" class="cart-overlay" onclick="toggleCart()"></div>
    
    <!-- Cart Sidebar -->
    <div id="cart" class="cart">
        <div class="cart-header">
            <div class="cart-title">üõí Sepetim</div>
            <button class="cart-close" onclick="toggleCart()">‚úï</button>
        </div>
        
        <div class="cart-items" id="cartItems">
            <div class="cart-empty">
                <div class="cart-empty-icon">üõí</div>
                <div>Sepetiniz bo≈ü</div>
                <div style="font-size: 13px; margin-top: 8px; color: #999;">Restoran se√ßip √ºr√ºn ekleyebilirsiniz</div>
            </div>
        </div>
        
        <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="min-order-warning" id="minOrderWarning" style="display: none;"></div>
            <div class="cart-summary">
                <div class="cart-summary-row">
                    <span>Ara Toplam</span>
                    <span id="cartSubtotal">0 ‚Ç∫</span>
                </div>
                <div class="cart-summary-row">
                    <span>Servis √úcreti</span>
                    <span id="serviceFee">5.00 ‚Ç∫</span>
                </div>
            </div>
            <div class="cart-total">
                <span>Toplam</span>
                <span id="cartTotal">0 ‚Ç∫</span>
            </div>
            <button class="cart-checkout" id="checkoutBtn" onclick="checkout()">Sipari≈ü Ver</button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Yemeksepeti - T√ºm haklarƒ± saklƒ±dƒ±r.</p>
            <p>MSSQL + PHP + HTML Projesi</p>
        </div>
    </footer>

    <script>
        // Auth fonksiyonlarƒ± - PHP Session tabanlƒ±
        let currentUser = null;
        let userFavorites = [];
        
        async function checkSession() {
            try {
                const response = await fetch('/backend/check_session.php');
                const data = await response.json();
                if (data.loggedIn) {
                    currentUser = data.user;
                    await loadUserFavorites();
                    return true;
                }
                return false;
            } catch (e) {
                console.error('Session kontrol√º hatasƒ±:', e);
                return false;
            }
        }
        
        async function loadUserFavorites() {
            if (!currentUser) {
                userFavorites = [];
                return;
            }
            
            try {
                const response = await fetch('/backend/get_favorites.php');
                const data = await response.json();
                if (data.success) {
                    // RestaurantID'leri number'a √ßevir
                    userFavorites = data.favorites.map(f => parseInt(f.RestaurantID));
                    console.log('Favoriler y√ºklendi:', userFavorites);
                } else {
                    console.log('Favori y√ºkleme ba≈üarƒ±sƒ±z:', data.error);
                    userFavorites = [];
                }
            } catch (e) {
                console.error('Favori y√ºkleme hatasƒ±:', e);
                userFavorites = [];
            }
        }
        
        function isLoggedIn() {
            return currentUser !== null;
        }
        
        function getUser() {
            return currentUser;
        }
        
        function logout() {
            window.location.href = '/backend/logout.php';
        }
        
        function navigateTo(url) {
            window.location.href = url;
        }
        
        async function toggleFavorite(event, restaurantId) {
            event.stopPropagation();
            event.preventDefault();
            
            console.log('toggleFavorite √ßaƒürƒ±ldƒ±, restaurantId:', restaurantId);
            console.log('currentUser:', currentUser);
            
            if (!currentUser) {
                alert('Favori eklemek i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z!');
                window.location.href = '/frontend/login.html';
                return;
            }
            
            const btn = event.currentTarget;
            const isFavorite = userFavorites.includes(restaurantId);
            
            console.log('ƒ∞≈ülem:', isFavorite ? '√áƒ±kar' : 'Ekle');
            console.log('Mevcut favoriler:', userFavorites);
            
            try {
                const response = await fetch('/backend/toggle_favorite.php', {
                    method: 'POST',
                    credentials: 'same-origin',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `restaurant_id=${restaurantId}`
                });
                
                const data = await response.json();
                console.log('API yanƒ±tƒ±:', data);
                
                if (data.success) {
                    if (isFavorite) {
                        // Favorilerden √ßƒ±kar
                        userFavorites = userFavorites.filter(id => id !== parseInt(restaurantId));
                        btn.classList.remove('active');
                        console.log('Favorilerden √ßƒ±karƒ±ldƒ±');
                    } else {
                        // Favorilere ekle
                        userFavorites.push(parseInt(restaurantId));
                        btn.classList.add('active');
                        console.log('Favorilere eklendi');
                    }
                    console.log('Yeni favori listesi:', userFavorites);
                    
                    // Bildirimi g√∂ster
                    showFavoriteNotification(isFavorite ? 'Favorilerden √ßƒ±karƒ±ldƒ±' : 'Favorilere eklendi');
                } else {
                    console.error('API hatasƒ±:', data.error);
                    alert('ƒ∞≈ülem ba≈üarƒ±sƒ±z: ' + (data.error || 'Bilinmeyen hata'));
                }
            } catch (error) {
                console.error('Favori i≈ülemi hatasƒ±:', error);
                alert('Bir hata olu≈ütu. L√ºtfen tekrar deneyin.');
            }
        }
        
        function toggleUserMenu(event) {
            event.stopPropagation();
            const menu = document.getElementById('userMenu');
            menu.classList.toggle('active');
        }
        
        function showFavoriteNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: #ff2d55;
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(255, 45, 85, 0.3);
                z-index: 10000;
                font-size: 14px;
                font-weight: 500;
                animation: slideInRight 0.3s ease-out;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }
        
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('userMenu');
            if (menu && !menu.contains(event.target)) {
                menu.classList.remove('active');
            }
        });
        
        // Adres modalƒ±nƒ± a√ß
        function openAddressModal() {
            const modal = document.getElementById('addressModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Input'a focus
            setTimeout(() => {
                document.getElementById('addressInput').focus();
            }, 100);
        }
        
        // Adres modalƒ±nƒ± kapat
        function closeAddressModal() {
            const modal = document.getElementById('addressModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
            
            // Input'u temizle
            document.getElementById('addressInput').value = '';
        }
        
        // Adres se√ß
        function selectAddress(address) {
            // Se√ßilen adresi header'da g√∂ster
            document.getElementById('selectedAddress').textContent = address;
            // localStorage'a kaydet
            localStorage.setItem('selectedAddress', address);
            // Modal'ƒ± kapat
            closeAddressModal();
            // Mahalleye g√∂re restoranlarƒ± getir
            filterRestaurantsByNeighborhood(address);
        }
        
        // Adres arama
        function handleAddressSearch(event) {
            const searchTerm = event.target.value.toLowerCase();
            // Adres √∂nerilerini filtrele
            const suggestions = document.querySelectorAll('.address-suggestion-item');
            let anyVisible = false;
            suggestions.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    item.style.display = '';
                    anyVisible = true;
                } else {
                    item.style.display = 'none';
                }
            });
            // Hi√ßbir √∂neri yoksa, √∂neri kutusunu bo≈üalt
            const suggestionsBox = document.getElementById('addressSuggestions');
            if (!anyVisible && suggestionsBox) {
                suggestionsBox.innerHTML = '<div style="padding:12px;color:#999;">Sonu√ß bulunamadƒ±</div>';
            }
            // Enter tu≈üuna basƒ±lƒ±rsa doƒürudan se√ß ve filtrele
            if (event.key === 'Enter' && searchTerm.trim()) {
                selectAddress(searchTerm.trim());
            }
        }
        window.handleAddressSearch = handleAddressSearch;

        // Kaydedilmi≈ü adresi y√ºkle
                        // Mahalleye g√∂re restoranlarƒ± filtrele
                        function filterRestaurantsByNeighborhood(address) {
                            // Sadece mahalle adƒ±nƒ± al (virg√ºlden √∂nceki kƒ±sƒ±m)
                            const neighborhood = address.split(',')[0].trim();
                            if (!neighborhood) return;
                            const container = document.getElementById('restaurantList');
                            container.innerHTML = '<div class="loading">Restoranlar y√ºkleniyor...</div>';
                            fetch('/backend/getRestaurantsByNeighborhood.php', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({ neighborhood })
                            })
                            .then(res => res.json())
                            .then(data => {
                                let filteredData = data;
                                // Sƒ±ralama tipi kontrol√º
                                const sortType = document.querySelector('.filter-section input[name="sort"]:checked')?.value || '';
                                if (sortType === 'delivery') {
                                    filteredData = filteredData.slice().sort((a, b) => {
                                        const aTime = parseInt(a.DeliveryTime);
                                        const bTime = parseInt(b.DeliveryTime);
                                        return aTime - bTime;
                                    });
                                } else if (sortType === 'minorder') {
                                    filteredData = filteredData.slice().sort((a, b) => {
                                        // Virg√ºl varsa noktaya √ßevir, bo≈ü/null ise 0 kabul et
                                        const aRating = parseFloat((a.Rating || '0').toString().replace(',', '.'));
                                        const bRating = parseFloat((b.Rating || '0').toString().replace(',', '.'));
                                        return bRating - aRating;
                                    });
                                }
                                if (Array.isArray(filteredData) && filteredData.length > 0) {
                                    displayRestaurants(filteredData);
                                } else {
                                    container.innerHTML = '<div class="loading">Bu mahallede restoran bulunamadƒ±.</div>';
                                }
                            })
                            .catch(() => {
                                container.innerHTML = '<div class="loading">Bir hata olu≈ütu, l√ºtfen tekrar deneyin.</div>';
                            });
                        }
                        window.filterRestaurantsByNeighborhood = filterRestaurantsByNeighborhood;
                // Adres inputunu temizle
                function clearAddressInput(e) {
                    e.preventDefault();
                    const input = document.getElementById('addressInput');
                    input.value = '';
                    // T√ºm √∂nerileri tekrar g√∂ster
                    const suggestions = document.querySelectorAll('.address-suggestion-item');
                    suggestions.forEach(item => item.style.display = '');
                    // "Sonu√ß bulunamadƒ±" mesajƒ± varsa kaldƒ±r
                    const suggestionsBox = document.getElementById('addressSuggestions');
                    if (suggestionsBox) {
                        const notFound = suggestionsBox.querySelector('div[style*="Sonu√ß bulunamadƒ±"]');
                        if (notFound) notFound.remove();
                    }
                    input.focus();
                }
                window.clearAddressInput = clearAddressInput;
        function loadSavedAddress() {
            const savedAddress = localStorage.getItem('selectedAddress');
            if (savedAddress) {
                document.getElementById('selectedAddress').textContent = savedAddress;
            }
        }

        async function updateAuthUI() {
            const userMenu = document.getElementById('userMenu');
            const userNameEl = document.getElementById('userName');
            
            const loggedIn = await checkSession();
            
            if (loggedIn) {
                const user = getUser();
                userMenu.style.display = 'block';
                if (user && user.FullName) {
                    userNameEl.textContent = user.FullName;
                } else if (user && user.Email) {
                    userNameEl.textContent = user.Email.split('@')[0];
                } else {
                    userNameEl.textContent = 'Kullanƒ±cƒ±';
                }
            } else {
                window.location.href = '/customer_login.php';
            }
        }

        // Kategorileri dinamik y√ºkle - GARANTƒ∞ √áALI≈ûAN VERSƒ∞YON
        function loadCategories() {
            fetch("/backend/get_categories.php")
                .then(res => res.json())
                .then(data => {
                    console.log("Kategoriler:", data);

                    const box = document.getElementById("kitchenCategories");
                    if (!box) {
                        console.error("kitchenCategories bulunamadƒ±");
                        return;
                    }

                    box.innerHTML = "";

                    data.forEach(cat => {
                        box.innerHTML += `
                            <div class="filter-option">
                                <input type="checkbox" class="kitchen-filter" id="cat-${cat.CategoryID}" value="${cat.Name}" onchange="loadRestaurants()">
                                <label for="cat-${cat.CategoryID}">${cat.Name}</label>
                            </div>
                        `;
                    });
                })
                .catch(err => console.error("Kategori fetch hatasƒ±:", err));
        }

        // Sayfa y√ºklendiƒüinde restoranlarƒ± getir
        window.onload = async function() {
            await updateAuthUI();
            loadSavedAddress();
            loadCategories();  // Kategorileri dinamik y√ºkle
            loadRestaurants();
        };

        // Restoranlarƒ± y√ºkle
        function loadRestaurants() {
            // Se√ßili kategorileri topla
            const categories = [];
            document.querySelectorAll('.filter-section input[type="checkbox"]:checked').forEach(cb => {
                if (cb.value) categories.push(cb.value);
            });

            // Se√ßili minimum puanƒ± al
            const rating = document.querySelector('.filter-section input[name="rating"]:checked')?.value || '0';

            // Se√ßili sƒ±ralama tipini al
            const sortType = document.querySelector('.filter-section input[name="sort"]:checked')?.value || '';

            // Se√ßili adresi al (localStorage'dan)
            const selectedAddress = localStorage.getItem('selectedAddress') || '';
            const selectedNeighborhood = selectedAddress.split(',')[0]?.trim() || '';

            let url = '/backend/restaurants.php';

            // API √ßaƒürƒ±sƒ± - t√ºm restoranlarƒ± getir
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    // Adrese g√∂re filtre uygula (adres se√ßiliyse)
                    let filteredData = data;
                    if (selectedNeighborhood) {
                        filteredData = filteredData.filter(restaurant =>
                            restaurant.Address && restaurant.Address.toLowerCase().includes(selectedNeighborhood.toLowerCase())
                        );
                    }

                    // Birden fazla kategori filtresi uygula
                    if (categories.length > 0) {
                        filteredData = filteredData.filter(restaurant => {
                            return categories.includes(restaurant.Category);
                        });
                    }

                    // Rating filtresi uygula
                    if (rating && rating !== '0') {
                        filteredData = filteredData.filter(restaurant => 
                            parseFloat(restaurant.Rating) >= parseFloat(rating)
                        );
                    }

                    // Teslimat s√ºresine g√∂re sƒ±ralama uygula
                    if (sortType === 'delivery') {
                        filteredData = filteredData.slice().sort((a, b) => {
                            const aTime = parseInt(a.DeliveryTime);
                            const bTime = parseInt(b.DeliveryTime);
                            return aTime - bTime;
                        });
                    } else if (sortType === 'minorder') {
                        filteredData = filteredData.slice().sort((a, b) => {
                            const aRating = parseFloat((a.Rating || '0').toString().replace(',', '.'));
                            const bRating = parseFloat((b.Rating || '0').toString().replace(',', '.'));
                            return bRating - aRating;
                        });
                    }

                    displayRestaurants(filteredData);
                })
                .catch(error => {
                    document.getElementById('restaurantList').innerHTML = 
                        '<div class="error">Restoranlar y√ºklenirken hata olu≈ütu. L√ºtfen backend/config.php dosyasƒ±ndaki veritabanƒ± baƒülantƒ± bilgilerini kontrol edin.</div>';
                    console.error('Error:', error);
                });
        }

        // Restoranlarƒ± ekrana yazdƒ±r
        function displayRestaurants(restaurants) {
                        console.log('displayRestaurants √ßaƒürƒ±ldƒ±:', restaurants);
                        console.log('userFavorites:', userFavorites);
            const container = document.getElementById('restaurantList');
            
            if (restaurants.error) {
                container.innerHTML = '<div class="error">' + restaurants.error + '</div>';
                return;
            }
            
            if (!restaurants || restaurants.length === 0) {
                container.innerHTML = '<div class="loading">Restoran bulunamadƒ±.</div>';
                return;
            }
            
            let html = '';
            restaurants.forEach(restaurant => {
                // Restoran ismine g√∂re g√∂rsel se√ß - Her burger restoranƒ±na farklƒ± g√∂rsel
                let imageUrl = 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=400&h=300&fit=crop';
                
                const name = restaurant.Name.toLowerCase();
                const category = restaurant.Category.toLowerCase();
                
                // Restoran ismine g√∂re local g√∂rseller
                // Burger restoranlarƒ±
                if (name.includes('musqa') && name.includes('mng')) {
                    imageUrl = 'images/musqamng.jpg';
                } else if (name.includes('musqa') && name.includes('gez')) {
                    imageUrl = 'images/musqagez.jpg';
                } else if (name.includes('cajun')) {
                    imageUrl = 'images/cajuncorner.jpg';
                } else if (name.includes('ye') && name.includes('doy') && category.includes('burger')) {
                    imageUrl = 'images/yedoys.jpg';
                } else if (name.includes('burger') && name.includes('king')) {
                    imageUrl = 'images/burger.jpg';
                } 
                // Pizza restoranlarƒ±
                else if (name.includes('cheff') && name.includes('pizza')) {
                    imageUrl = 'images/cheffpizza.jpg';
                }
                // D√∂ner restoranlarƒ±
                else if (name.includes('hot') && name.includes('d√∂ner')) {
                    imageUrl = 'images/hotdoner.jpg';
                } else if (name.includes('saray') && name.includes('d√∂ner')) {
                    imageUrl = 'images/saraydoner.jpg';
                } else if (name.includes('√∂nc√º') && name.includes('d√∂ner')) {
                    imageUrl = 'images/oncudoner.jpg';
                } else if (name.includes('√º√ßler')) {
                    imageUrl = 'images/uclerdoner.jpg';
                } else if (name.includes('usta') && name.includes('d√∂ner')) {
                    imageUrl = 'images/ustadonerci.jpg';
                } else if (name.includes('ye') && name.includes('doy') && name.includes('d√∂ner')) {
                    imageUrl = 'images/yedoysdoner.jpg';
                } else if (name.includes('takiles')) {
                    imageUrl = 'images/takiles.jpg';
                }
                // Balƒ±k ve deniz √ºr√ºnleri restoranlarƒ±
                else if (name.includes('g√ºnaydƒ±n') && name.includes('balƒ±k')) {
                    imageUrl = 'images/balik.jpg';
                } else if (name.includes('konoha')) {
                    imageUrl = 'images/konoha.jpg';
                } else if (name.includes('asaka')) {
                    imageUrl = 'images/asaka.jpg';
                } else if (name.includes('souper')) {
                    imageUrl = 'images/souper.jpg';
                } else if (name.includes('love') && name.includes('fish')) {
                    imageUrl = 'images/ilovefish.jpg';
                } else if (name.includes('noodle') && name.includes('saka')) {
                    imageUrl = 'images/noodlesakachef.jpg';
                } else if (name.includes('balƒ±k√ßƒ±') && name.includes('hasan')) {
                    imageUrl = 'images/balikcihasanusta.jpg';
                } else if (name.includes('urla')) {
                    imageUrl = 'images/balik.jpg';
                } else if (name.includes('midyeci')) {
                    imageUrl = 'images/sushi.jpg';
                } else if (name.includes('kasap') && name.includes('balƒ±k')) {
                    imageUrl = 'images/balik.jpg';
                } else if (name.includes('≈üi≈üli') && name.includes('balƒ±k')) {
                    imageUrl = 'images/balik.jpg';
                } else if (name.includes('etiler') && name.includes('balƒ±k')) {
                    imageUrl = 'images/etilerbalikcisi.jpg';
                } else if (name.includes('midye') && name.includes('town')) {
                    imageUrl = 'images/midyetown.jpg';
                } else if (name.includes('balƒ±k') && name.includes('ekmek')) {
                    imageUrl = 'images/balikekmekevi.jpg';
                } else if (name.includes('istakoz')) {
                    imageUrl = 'images/istakozi.jpg';
                } else if (name.includes('orkinos')) {
                    imageUrl = 'images/orkinosbalikevi.jpg';
                } else if (name.includes('g√∂khan') && name.includes('balƒ±k')) {
                    imageUrl = 'images/gokhanbalik.jpg';
                }
                // D√ºnya Mutfaƒüƒ± restoranlarƒ±
                else if (name.includes('big') && name.includes('chefs')) {
                    imageUrl = 'images/bigchefs.jpg';
                } else if (name.includes('pronto') && name.includes('pizza')) {
                    imageUrl = 'images/prontopizza.jpg';
                } else if (name.includes('martin') && name.includes('eden')) {
                    imageUrl = 'images/martineden.jpg';
                } else if (name.includes('duru') && name.includes('mutfak')) {
                    imageUrl = 'images/durumutfak.jpg';
                } else if (name.includes('≈üehr') && name.includes('palas')) {
                    imageUrl = 'images/sehripalas.jpg';
                } else if (name.includes('coffee') && name.includes('dine')) {
                    imageUrl = 'images/coffedine.jpg';
                }
                // Ev Yemekleri restoranlarƒ±
                else if (name.includes('√ßorbacƒ±') && name.includes('numan')) {
                    imageUrl = 'images/corbacinuman.jpg';
                } else if (name.includes('usta') && name.includes('pilav')) {
                    imageUrl = 'images/ustapilav.jpg';
                } else if (name.includes('me≈ühur') && name.includes('√ßorbacƒ±') && name.includes('yƒ±ldƒ±zkent')) {
                    imageUrl = 'images/meshurcorbaciyildizkent.jpg';
                } else if (name.includes('beyzade') && name.includes('mantƒ±')) {
                    imageUrl = 'images/beyzademanti.jpg';
                } else if (name.includes('h√ºnerli') && name.includes('eller') && category.includes('ev yemekleri')) {
                    imageUrl = 'images/hunerlieller.jpg';
                } else if (name.includes('anneeli')) {
                    imageUrl = 'images/anneelievyemekleri.jpg';
                }
                // Kahvaltƒ± & B√∂rek restoranlarƒ±
                else if (name.includes('sariyer') && name.includes('b√∂rek')) {
                    imageUrl = 'images/sariyerborekcisi.jpg';
                } else if (name.includes('pidecix')) {
                    imageUrl = 'images/pidecix.jpg';
                } else if (name.includes('duru') && name.includes('mutfak') && category.includes('kahvaltƒ±')) {
                    imageUrl = 'images/durumutfak.jpg';
                } else if (name.includes('h√ºnerli') && name.includes('eller') && category.includes('kahvaltƒ±')) {
                    imageUrl = 'images/hunerlieller.jpg';
                }
                // Kahve restoranlarƒ±
                else if (name.includes('mackbear')) {
                    imageUrl = 'images/mackbearcoffe.jpg';
                } else if (name.includes('starbucks')) {
                    imageUrl = 'images/starbucks.jpg';
                } else if (name.includes('coffy') && !name.includes('dospresso')) {
                    imageUrl = 'images/coffy.jpg';
                } else if (name.includes('espressolab')) {
                    imageUrl = 'images/espressolab.jpg';
                } else if (name.includes('gloria')) {
                    imageUrl = 'images/gloria.jpg';
                } else if (name.includes('kahve') && name.includes('d√ºnya')) {
                    imageUrl = 'images/kahvedunyasi.jpg';
                } else if (name.includes('dospresso')) {
                    imageUrl = 'images/dospresso.jpg';
                } else if (name.includes('arabica')) {
                    imageUrl = 'images/arabica.jpg';
                }
                // Pizza restoranlarƒ±
                else if (name.includes('terra') && name.includes('pizza')) {
                    imageUrl = 'images/terrapizza.jpg';
                } else if (name.includes('pronto') && name.includes('pizza')) {
                    imageUrl = 'images/prontopizza.jpg';
                } else if (name.includes('sbarro')) {
                    imageUrl = 'images/sbarropizza.jpg';
                } else if (name.includes('ye doy') && name.includes('pizza')) {
                    imageUrl = 'images/yedoyspizza.jpg';
                } else if (name.includes('domino')) {
                    imageUrl = 'images/dominospizza.jpg';
                } else if (name.includes('little') && name.includes('caesar')) {
                    imageUrl = 'images/littlecaesarspizza.jpg';
                } else if (name.includes('pasaport') && name.includes('pizza')) {
                    imageUrl = 'images/pasaportpizza.jpg';
                } else if (name.includes('pizza') && name.includes('cix')) {
                    imageUrl = 'images/pizzacix.jpg';
                }
                // Tatlƒ± restoranlarƒ±
                else if (name.includes('jamal')) {
                    imageUrl = 'images/jamal.jpg';
                } else if (name.includes('zirve') && name.includes('baklava')) {
                    imageUrl = 'images/zirvebaklava.jpg';
                } else if (name.includes('chocolabs')) {
                    imageUrl = 'images/chocolabs.jpg';
                } else if (name.includes('s√ºtl√ºce') && name.includes('kadayƒ±f')) {
                    imageUrl = 'images/sutluce.jpg';
                } else if (name.includes('boston') && (name.includes('drink') || name.includes('dessert'))) {
                    imageUrl = 'images/boston.jpg';
                } else if ( name.includes('ekleristan')) {
                    imageUrl = 'images/ekleristan.jpg';
                } else if (name.includes('s√ºtla√ßcƒ±')) {
                    imageUrl = 'images/sutlacci.jpg';
                }
                // √áiƒü K√∂fte restoranlarƒ±
                else if (name.includes('o ses') && name.includes('√ßiƒük√∂fte')) {
                    imageUrl = 'images/oses.jpg';
                } else if (name.includes('biberzade')) {
                    imageUrl = 'images/biberzade.jpg';
                } else if (name.includes('komagene')) {
                    imageUrl = 'images/komagene.jpg';
                } else if (name.includes('√ßiƒük√∂ftem')) {
                    imageUrl = 'images/cigkoftem.jpg';
                }
                // D√∂ner restoranlarƒ±
                else if (name.includes('usta') && name.includes('d√∂nerci')) {
                    imageUrl = 'images/ustadonerci.jpg';
                }
                // Kategoriye g√∂re fallback
                else if (category.includes('pizza')) {
                    imageUrl = 'images/pizza.jpg';
                } else if (category.includes('burger')) {
                    imageUrl = 'images/burger.jpg';
                } else if (category.includes('d√∂ner')) {
                    imageUrl = 'images/kebap.jpg';
                } else if (category.includes('kebap') || category.includes('kebab') || name.includes('kebap') || name.includes('√ßaƒü')) {
                    imageUrl = 'images/kebap.jpg';
                } else if (category.includes('sushi') || category.includes('balƒ±k') || category.includes('deniz') || name.includes('balƒ±k') || name.includes('fish') || name.includes('midye')) {
                    imageUrl = 'images/sushi.jpg';
                } else if (category.includes('tatlƒ±') || category.includes('pasta') || category.includes('dessert') || category.includes('dondurma')) {
                    imageUrl = 'images/tatli.jpg';
                } else if (category.includes('kahve') || category.includes('cafe') || name.includes('kahve')) {
                    imageUrl = 'images/kahve.jpg';
                } else if (category.includes('ev yemek') || name.includes('ev yemek')) {
                    imageUrl = 'images/yemek.jpg';
                } else if (category.includes('kahvaltƒ±') || category.includes('b√∂rek')) {
                    imageUrl = 'images/yemek.jpg';
                }
                
                const isFavorite = (Array.isArray(userFavorites) ? userFavorites : []).includes(Number(restaurant.RestaurantID));
                
                html += `
                    <div class="restaurant-card" onclick="window.location.href='restaurant.html?id=${restaurant.RestaurantID}'">
                        <div class="restaurant-image">
                            <img src="${imageUrl}" alt="${restaurant.Name}" loading="lazy">
                            <button class="favorite-btn ${isFavorite ? 'active' : ''}" 
                                    onclick="toggleFavorite(event, ${restaurant.RestaurantID})"
                                    data-restaurant-id="${restaurant.RestaurantID}">
                                <svg viewBox="0 0 24 24">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="restaurant-info">
                            <div class="restaurant-name">${restaurant.Name}</div>
                            <div class="restaurant-category">üìç ${restaurant.Category}</div>
                            <div class="restaurant-meta">
                                <span class="rating">‚≠ê ${restaurant.Rating}</span>
                                <span class="delivery-time">üïê ${restaurant.DeliveryTime} dk</span>
                            </div>
                            <div class="restaurant-meta">
                                <span class="min-order">Min. Tutar: ${restaurant.MinOrderAmount} ‚Ç∫</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Sepet fonksiyonlarƒ±
        let cart = [];
        const SERVICE_FEE = 5.00;

        function toggleCart() {
            const cartEl = document.getElementById('cart');
            const overlay = document.getElementById('cartOverlay');
            const toggle = document.getElementById('cartToggle');
            
            cartEl.classList.toggle('active');
            overlay.classList.toggle('active');
            
            if (cartEl.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = 'auto';
            }
        }

        function updateCartUI() {
            const cartItemsEl = document.getElementById('cartItems');
            const cartFooterEl = document.getElementById('cartFooter');
            const headerCartBadge = document.getElementById('headerCartBadge');
            
            // Toplam √ºr√ºn sayƒ±sƒ±nƒ± hesapla
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            // Badge'leri g√ºncelle
            if (totalItems > 0) {
                headerCartBadge.textContent = totalItems;
                headerCartBadge.style.display = 'flex';
            } else {
                headerCartBadge.style.display = 'none';
            }
            
            // Sepet bo≈üsa
            if (cart.length === 0) {
                cartItemsEl.innerHTML = `
                    <div class="cart-empty">
                        <div class="cart-empty-icon">üõí</div>
                        <div>Sepetiniz bo≈ü</div>
                        <div style="font-size: 13px; margin-top: 8px; color: #999;">Restoran se√ßip √ºr√ºn ekleyebilirsiniz</div>
                    </div>
                `;
                cartFooterEl.style.display = 'none';
                return;
            }
            
            // Sepeti g√∂ster
            cartFooterEl.style.display = 'block';
            
            // Restoranlarƒ± grupla
            const restaurantGroups = {};
            cart.forEach((item, index) => {
                const restName = item.restaurantName || 'Diƒüer';
                if (!restaurantGroups[restName]) {
                    restaurantGroups[restName] = [];
                }
                restaurantGroups[restName].push({...item, index});
            });
            
            // √úr√ºnleri restoran gruplarƒ± ile listele
            let html = '';
            Object.keys(restaurantGroups).forEach(restName => {
                html += `<div style="font-size: 12px; font-weight: 600; color: #d71f4b; margin: 16px 0 8px 0; padding-bottom: 8px; border-bottom: 1px solid #f0f0f0;">üçΩÔ∏è ${restName}</div>`;
                
                restaurantGroups[restName].forEach(item => {
                    html += `
                        <div class="cart-item">
                            <div class="cart-item-info">
                                <div class="cart-item-name">${item.name}</div>
                                <div class="cart-item-price">${item.price.toFixed(2)} ‚Ç∫</div>
                                <div class="cart-item-quantity">
                                    <button class="cart-item-btn" onclick="decreaseQuantity(${item.index})">-</button>
                                    <span>${item.quantity}</span>
                                    <button class="cart-item-btn" onclick="increaseQuantity(${item.index})">+</button>
                                </div>
                            </div>
                            <div class="cart-item-remove" onclick="removeFromCart(${item.index})">üóëÔ∏è</div>
                        </div>
                    `;
                });
            });
            cartItemsEl.innerHTML = html;
            
            // Toplamlarƒ± hesapla
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const total = subtotal + SERVICE_FEE;
            
            document.getElementById('cartSubtotal').textContent = subtotal.toFixed(2) + ' ‚Ç∫';
            document.getElementById('cartTotal').textContent = total.toFixed(2) + ' ‚Ç∫';
            
            // Sepeti localStorage'a kaydet
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function increaseQuantity(index) {
            cart[index].quantity++;
            updateCartUI();
        }

        function decreaseQuantity(index) {
            if (cart[index].quantity > 1) {
                cart[index].quantity--;
            } else {
                removeFromCart(index);
            }
            updateCartUI();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
        }

        function checkout() {
            if (cart.length === 0) return;
            
            if (!isLoggedIn()) {
                alert('Sipari≈ü vermek i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z!');
                window.location.href = 'login.html';
                return;
            }
            
            const user = getUser();
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const total = subtotal + SERVICE_FEE;
            
            let summary = `üìã Sipari≈ü √ñzeti\n`;
            summary += `üë§ Kullanƒ±cƒ±: ${user ? (user.FullName || user.fullName || 'Misafir') : 'Misafir'}\n\n`;
            summary += `üçΩÔ∏è √úr√ºnler:\n`;
            cart.forEach(item => {
                summary += `  ${item.name} x${item.quantity} - ${(item.price * item.quantity).toFixed(2)} ‚Ç∫\n`;
            });
            summary += `\nüí∞ Ara Toplam: ${subtotal.toFixed(2)} ‚Ç∫`;
            summary += `\nüöö Servis √úcreti: ${SERVICE_FEE.toFixed(2)} ‚Ç∫`;
            summary += `\nüíµ Toplam: ${total.toFixed(2)} ‚Ç∫`;
            
            if (confirm(summary + '\n\nSipari≈üi onaylƒ±yor musunuz?')) {
                // Sepeti temizle
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartUI();
                toggleCart();
                alert('‚úÖ Sipari≈üiniz alƒ±ndƒ±! Te≈üekk√ºr ederiz.');
            }
        }

        // Sayfa y√ºklendiƒüinde sepeti kontrol et
        function loadCart() {
            const savedCart = localStorage.getItem('cart');
            if (savedCart && savedCart !== 'null' && savedCart !== 'undefined') {
                try {
                    const parsed = JSON.parse(savedCart);
                    if (Array.isArray(parsed)) {
                        cart = parsed;
                    }
                    updateCartUI();
                } catch (e) {
                    console.error('Cart parse error:', e);
                    cart = [];
                }
            } else {
                cart = [];
            }
        }

        // Sayfa y√ºklendiƒüinde
        window.onload = async function() {
            await checkSession();
            updateAuthUI();
            loadSavedAddress();
            loadRestaurants();
            loadCart();
        };
        
        // Sayfa g√∂r√ºn√ºr olduƒüunda sepeti yeniden y√ºkle
        window.addEventListener('focus', function() {
            loadCart();
        });
        
        // Sayfa g√∂r√ºn√ºrl√ºk deƒüi≈ütiƒüinde sepeti yenile
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                loadCart();
            }
        });
        
        // Mahalle butonuna tƒ±klama ve mahalleye g√∂re restoran filtreleme
        document.addEventListener('DOMContentLoaded', function() {
            // Mahalle butonunu bul (nav-menu'deki ikinci nav-item)
            const navItems = document.querySelectorAll('.nav-menu .nav-item');
            if (navItems.length > 1) {
                navItems[1].addEventListener('click', function(e) {
                    e.preventDefault();
                    // T√ºm nav-item'lardan active class'ƒ± kaldƒ±r
                    navItems.forEach(item => item.classList.remove('active'));
                    // Mahalle butonuna active class'ƒ± ekle
                    navItems[1].classList.add('active');
                    // Kullanƒ±cƒ± adresini header'dan al
                    const address = document.getElementById('selectedAddress').textContent;
                    const neighborhood = address.split(',')[0].trim();
                    if (!neighborhood || neighborhood === 'Adres se√ßin veya girin') {
                        alert('L√ºtfen √∂nce adres se√ßin.');
                        return;
                    }
                    // Backend'e fetch ile mahalleye g√∂re restoran isteƒüi at
                    fetch('/backend/getRestaurantsByNeighborhood.php', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ neighborhood })
                    })
                    .then(res => res.json())
                    .then(data => {
                        const container = document.getElementById('restaurantList');
                        if (Array.isArray(data) && data.length > 0) {
                            displayRestaurants(data);
                        } else {
                            container.innerHTML = '<div class="loading">Bu mahallede restoran bulunamadƒ±.</div>';
                        }
                    })
                    .catch(() => {
                        alert('Bir hata olu≈ütu, l√ºtfen tekrar deneyin.');
                    });
                });
            }
        });
    </script>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        console.log("Mutfak filtre JS √ßalƒ±≈ütƒ±");

        fetch("http://localhost:8000/backend/get_categories.php")
            .then(res => res.json())
            .then(data => {
                console.log("Kategoriler:", data);

                const box = document.getElementById("kitchenCategories");
                if (!box) {
                    console.error("kitchenCategories bulunamadƒ±");
                    return;
                }

                box.innerHTML = "";

                data.forEach(cat => {
                    box.innerHTML += `
                        <div class="filter-option">
                            <input type="checkbox" class="kitchen-filter" id="cat-${cat.CategoryID}" value="${cat.Name}" onchange="loadRestaurants()">
                            <label for="cat-${cat.CategoryID}">${cat.Name}</label>
                        </div>
                    `;
                });

                console.log(`${data.length} kategori eklendi`);
            })
            .catch(err => console.error("Fetch hata:", err));
    });
    </script>
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        const addressSpan = document.getElementById("selectedAddress");

        if (addressSpan) {
        addressSpan.innerText = "Adres se√ßin veya girin";
        localStorage.removeItem("selectedAddress");
     }
    });
</script>

<!-- Chat Support Widget -->
<button class="chat-button" id="chatButton" onclick="toggleChat()">
    <svg viewBox="0 0 24 24">
        <path d="M12 2C6.48 2 2 6.48 2 12c0 1.54.36 3 .97 4.29L2 22l5.71-.97C9 21.64 10.46 22 12 22c5.52 0 10-4.48 10-10S17.52 2 12 2zm0 18c-1.38 0-2.68-.29-3.85-.81l-.27-.13-2.82.48.48-2.82-.13-.27C4.89 14.68 4.6 13.38 4.6 12 4.6 7.92 7.92 4.6 12 4.6s7.4 3.32 7.4 7.4-3.32 7.4-7.4 7.4zm4-5.5h-3v3h-2v-3H8v-2h3V9h2v3.5h3v2z"/>
    </svg>
    <span class="chat-badge" id="chatBadge">1</span>
</button>

<div class="chat-container" id="chatContainer">
    <div class="chat-header">
        <div class="chat-header-info">
            <div class="chat-avatar">
                üí¨
            </div>
            <div class="chat-header-text">
                <h3>M√º≈üteri Destek</h3>
                <div class="chat-status">
                    <span class="status-dot"></span>
                    √áevrimi√ßi
                </div>
            </div>
        </div>
        <button class="chat-close" onclick="toggleChat()">√ó</button>
    </div>

    <div class="chat-messages" id="chatMessages">
        <div class="message support">
            <div class="message-avatar">üéØ</div>
            <div class="message-content">
                <div class="message-bubble">
                    Merhaba! Yemeksepeti m√º≈üteri desteƒüine ho≈ü geldiniz. Size nasƒ±l yardƒ±mcƒ± olabilirim?
                </div>
                <div class="message-time" id="welcomeTime"></div>
                <div class="quick-replies">
                    <button class="quick-reply" onclick="sendQuickReply('Sipari≈ü durumu')">üì¶ Sipari≈ü durumu</button>
                    <button class="quick-reply" onclick="sendQuickReply('ƒ∞ptal/ƒ∞ade')">‚Ü©Ô∏è ƒ∞ptal/ƒ∞ade</button>
                    <button class="quick-reply" onclick="sendQuickReply('√ñdeme sorunu')">üí≥ √ñdeme sorunu</button>
                    <button class="quick-reply" onclick="sendQuickReply('Diƒüer')">‚ùì Diƒüer</button>
                </div>
            </div>
        </div>

        <div class="message support typing-indicator" id="typingIndicator">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
        </div>
    </div>

    <div class="chat-input-container">
        <input 
            type="text" 
            class="chat-input" 
            id="chatInput" 
            placeholder="Mesajƒ±nƒ±zƒ± yazƒ±n..."
            onkeypress="handleChatKeyPress(event)"
        >
        <button class="chat-send" id="chatSend" onclick="sendMessage()">
            <svg viewBox="0 0 24 24">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
        </button>
    </div>
</div>

<script>
    // Chat functionality
    let chatOpen = false;
    let messageCount = 0;

    function toggleChat() {
        chatOpen = !chatOpen;
        const chatContainer = document.getElementById('chatContainer');
        const chatButton = document.getElementById('chatButton');
        const chatBadge = document.getElementById('chatBadge');
        
        if (chatOpen) {
            chatContainer.classList.add('active');
            chatBadge.classList.remove('active');
            document.getElementById('chatInput').focus();
            scrollToBottom();
        } else {
            chatContainer.classList.remove('active');
        }
    }

    function getCurrentTime() {
        const now = new Date();
        return now.toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' });
    }

    function scrollToBottom() {
        const chatMessages = document.getElementById('chatMessages');
        setTimeout(() => {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }, 100);
    }

    function showTypingIndicator() {
        const indicator = document.getElementById('typingIndicator');
        indicator.classList.add('active');
        scrollToBottom();
    }

    function hideTypingIndicator() {
        const indicator = document.getElementById('typingIndicator');
        indicator.classList.remove('active');
    }

    function addMessage(text, isUser = false) {
        const chatMessages = document.getElementById('chatMessages');
        const typingIndicator = document.getElementById('typingIndicator');
        
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${isUser ? 'user' : 'support'}`;
        
        const avatar = isUser ? 'üë§' : 'üéØ';
        
        messageDiv.innerHTML = `
            <div class="message-avatar">${avatar}</div>
            <div class="message-content">
                <div class="message-bubble">${text}</div>
                <div class="message-time">${getCurrentTime()}</div>
            </div>
        `;
        
        chatMessages.insertBefore(messageDiv, typingIndicator);
        scrollToBottom();
    }

    function sendMessage() {
        const input = document.getElementById('chatInput');
        const message = input.value.trim();
        
        if (message === '') return;
        
        // Add user message
        addMessage(message, true);
        input.value = '';
        
        // Show typing indicator
        showTypingIndicator();
        
        // Simulate support response
        setTimeout(() => {
            hideTypingIndicator();
            const responses = [
                'Mesajƒ±nƒ±zƒ± aldƒ±k. Destek ekibimiz en kƒ±sa s√ºrede size d√∂n√º≈ü yapacaktƒ±r.',
                'Anlƒ±yorum. Bu konuda size yardƒ±mcƒ± olmak i√ßin m√ºsait bir temsilcimizi baƒülƒ±yorum.',
                'Te≈üekk√ºr ederiz. Sorununuz ile ilgilenmekteyiz.',
                'Size yardƒ±mcƒ± olabilmek i√ßin biraz daha detay verebilir misiniz?'
            ];
            const response = responses[Math.floor(Math.random() * responses.length)];
            addMessage(response);
        }, 1500);
    }

    function sendQuickReply(text) {
        addMessage(text, true);
        
        showTypingIndicator();
        
        setTimeout(() => {
            hideTypingIndicator();
            let response = '';
            
            switch(text) {
                case 'Sipari≈ü durumu':
                    response = 'Sipari≈ü durumunuzu kontrol etmek i√ßin sipari≈ü numaranƒ±zƒ± payla≈üabilir misiniz?';
                    break;
                case 'ƒ∞ptal/ƒ∞ade':
                    response = 'ƒ∞ptal veya iade i≈üleminiz i√ßin sipari≈ü numaranƒ±za ihtiyacƒ±mƒ±z var. Sipari≈ü numaranƒ±zƒ± payla≈üƒ±r mƒ±sƒ±nƒ±z?';
                    break;
                case '√ñdeme sorunu':
                    response = '√ñdeme ile ilgili ya≈üadƒ±ƒüƒ±nƒ±z sorunu detaylƒ± bir ≈üekilde a√ßƒ±klayabilir misiniz?';
                    break;
                case 'Diƒüer':
                    response = 'Tabii ki yardƒ±mcƒ± olabilirim. Sorununuzu detaylƒ± bir ≈üekilde anlatabilir misiniz?';
                    break;
                default:
                    response = 'Size nasƒ±l yardƒ±mcƒ± olabilirim?';
            }
            
            addMessage(response);
        }, 1200);
    }

    function handleChatKeyPress(event) {
        if (event.key === 'Enter') {
            sendMessage();
        }
    }

    // Initialize chat
    document.addEventListener('DOMContentLoaded', function() {
        // Set welcome message time
        document.getElementById('welcomeTime').textContent = getCurrentTime();
        
        // Show notification badge after 5 seconds
        setTimeout(() => {
            if (!chatOpen) {
                document.getElementById('chatBadge').classList.add('active');
            }
        }, 5000);
    });
</script>

</body>
</html>
